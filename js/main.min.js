var RockinChart,RockinForm,json_data,rockin_form;json_data={categorized_domain_requests:[{summary_date:"2014-12-05",human_total:1011,good_bot_total:23,bad_bot_total:12842,whitelist_total:0,overall_total:13876},{summary_date:"2014-12-06",human_total:339,good_bot_total:44,bad_bot_total:12810,whitelist_total:0,overall_total:13193},{summary_date:"2014-12-07",human_total:329,good_bot_total:32,bad_bot_total:12768,whitelist_total:0,overall_total:13129},{summary_date:"2014-12-08",human_total:807,good_bot_total:17,bad_bot_total:12786,whitelist_total:0,overall_total:13610},{summary_date:"2014-12-09",human_total:969,good_bot_total:30,bad_bot_total:12764,whitelist_total:0,overall_total:13763},{summary_date:"2014-12-10",human_total:985,good_bot_total:22,bad_bot_total:12666,whitelist_total:0,overall_total:13673},{summary_date:"2014-12-11",human_total:952,good_bot_total:21,bad_bot_total:12766,whitelist_total:0,overall_total:13739},{summary_date:"2014-12-12",human_total:866,good_bot_total:28,bad_bot_total:12762,whitelist_total:0,overall_total:13656},{summary_date:"2014-12-13",human_total:267,good_bot_total:26,bad_bot_total:12710,whitelist_total:0,overall_total:13003},{summary_date:"2014-12-14",human_total:300,good_bot_total:30,bad_bot_total:12757,whitelist_total:0,overall_total:13087},{summary_date:"2014-12-15",human_total:1979,good_bot_total:30,bad_bot_total:8230,whitelist_total:0,overall_total:10239},{summary_date:"2014-12-16",human_total:985,good_bot_total:28,bad_bot_total:244,whitelist_total:0,overall_total:1257},{summary_date:"2014-12-17",human_total:961,good_bot_total:29,bad_bot_total:286,whitelist_total:0,overall_total:1276},{summary_date:"2014-12-18",human_total:1577,good_bot_total:17,bad_bot_total:2733,whitelist_total:0,overall_total:4327},{summary_date:"2014-12-19",human_total:782,good_bot_total:23,bad_bot_total:14884,whitelist_total:0,overall_total:15689},{summary_date:"2014-12-20",human_total:289,good_bot_total:29,bad_bot_total:14731,whitelist_total:0,overall_total:15049},{summary_date:"2014-12-21",human_total:285,good_bot_total:24,bad_bot_total:14704,whitelist_total:0,overall_total:15013},{summary_date:"2014-12-22",human_total:740,good_bot_total:21,bad_bot_total:13631,whitelist_total:0,overall_total:14392},{summary_date:"2014-12-23",human_total:867,good_bot_total:27,bad_bot_total:12517,whitelist_total:0,overall_total:13411},{summary_date:"2014-12-24",human_total:572,good_bot_total:21,bad_bot_total:299,whitelist_total:0,overall_total:892},{summary_date:"2014-12-25",human_total:385,good_bot_total:25,bad_bot_total:203,whitelist_total:0,overall_total:613},{summary_date:"2014-12-26",human_total:504,good_bot_total:17,bad_bot_total:200,whitelist_total:0,overall_total:721},{summary_date:"2014-12-27",human_total:284,good_bot_total:33,bad_bot_total:168,whitelist_total:0,overall_total:485},{summary_date:"2014-12-28",human_total:265,good_bot_total:30,bad_bot_total:182,whitelist_total:0,overall_total:477},{summary_date:"2014-12-29",human_total:684,good_bot_total:37,bad_bot_total:103,whitelist_total:0,overall_total:824},{summary_date:"2014-12-30",human_total:671,good_bot_total:23,bad_bot_total:122,whitelist_total:0,overall_total:816},{summary_date:"2014-12-31",human_total:502,good_bot_total:30,bad_bot_total:115,whitelist_total:0,overall_total:647},{summary_date:"2015-01-01",human_total:240,good_bot_total:26,bad_bot_total:199,whitelist_total:0,overall_total:465},{summary_date:"2015-01-02",human_total:501,good_bot_total:21,bad_bot_total:76,whitelist_total:0,overall_total:598},{summary_date:"2015-01-03",human_total:290,good_bot_total:16,bad_bot_total:82,whitelist_total:0,overall_total:388},{summary_date:"2015-01-04",human_total:328,good_bot_total:27,bad_bot_total:101,whitelist_total:0,overall_total:456}]},RockinChart=window.RockinChart||{},RockinChart.init=function(){function t(t){this.view=new RockinChart.View(t)}return t.prototype.view=null,t.prototype.display=function(){return this.view.display()},t}(),RockinChart.View=function(){function t(t){this.data=new RockinChart.Data(t),console.log("[RF] View initd")}return t.prototype.json=null,t.prototype.chart=null,t.prototype.updater=null,t.prototype.data=null,t.prototype.chartData={chart:{zoomType:"x"},title:{text:"Bot Results"},subtitle:{text:"This is a rockin chart with rockin results"},xAxis:{type:"datetime",minRange:12096e5},yAxis:{title:{text:"Bots"}},legend:{enabled:!0},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[]},t.prototype.getFirstDatePoint=function(){return new Date(this.json[0].summary_date).getTime()},t.prototype.getPointInterval=function(){return 864e5},t.prototype.getSeriesWithData=function(t,o){return{type:"line",name:t.replace(/\_/gi," "),pointInterval:this.getPointInterval,pointStart:this.getFirstDatePoint,data:o}},t.prototype.buildChart=function(){return $("#chart_container").highcharts(this.chartData),this.chart=$("#chart_container").highcharts(),this.updater=new RockinChart.Updater(this.chart)},t.prototype.buildSeries=function(){var t,o,a;this.chartData.series=[],o=this.data.data;for(t in o)a=o[t],this.chartData.series.push(this.getSeriesWithData(t,a));return this.buildChart()},t.prototype.addUpdatePoint=function(t,o,a){return this.updater.addUpdatePoint(t,o,a)},t.prototype.getSeriesNames=function(){var t,o,a,e,r;for(e=this.chart.series,r=[],t=0,a=e.length;a>t;t++)o=e[t],r.push(o.name);return r},t.prototype.display=function(){return this.buildSeries()},t}(),RockinChart.Updater=function(){function t(t){this.chart=t,console.log("[RF] Updater initd")}return t.prototype.chart=null,t.prototype.findSeriesForName=function(t){var o,a,e;a=this.chart.series;for(o in a)if(e=a[o],e.name===t)return Number(o);return!1},t.prototype.findPointKeyInSeries=function(t,o){var a,e,r;e=this.chart.series[t].data;for(a in e)if(r=e[a],r.x===o)return Number(a);return!1},t.prototype.updatePointInSeries=function(t,o,a){return this.chart.series[t].data[o].update(a)},t.prototype.addUpdatePoint=function(t,o,a){var e,r;return r=this.findSeriesForName(o),(e=this.findPointKeyInSeries(r,t))?this.updatePointInSeries(r,e,a):this.chart.series[r].addPoint([t,a])},t}(),RockinChart.Data=function(){function t(t){this.json=t.categorized_domain_requests,this.runThroughData(),console.log("[RF] Data initd")}return t.prototype.json=null,t.prototype.data={},t.prototype.getDateFromObject=function(t){var o,a;for(o in t)if(a=t[o],"summary_date"===o)return new Date(a).getTime();return!1},t.prototype.setPoint=function(t,o,a){return this.data[o]||(this.data[o]=[]),this.data[o].push([t,a])},t.prototype.compileDataPointIntoSeries=function(t){var o,a,e,r;e=this.getDateFromObject(t),a=[];for(o in t)r=t[o],a.push("summary_date"!==o?this.setPoint(this.getDateFromObject(t),o,r):void 0);return a},t.prototype.sortData=function(){return this.json.sort(function(t,o){return new Date(t.summary_date)-new Date(o.summary_date)})},t.prototype.runThroughData=function(){var t,o,a,e,r;for(this.sortData(),e=this.json,r=[],t=0,a=e.length;a>t;t++)o=e[t],r.push(this.compileDataPointIntoSeries(o));return r},t}(),RockinForm=function(){function t(t){this.rockin_chart=new RockinChart.init(t)}return t.prototype.rockin_chart=null,t.prototype.form=null,t.prototype.getRadioValue=function(t){var o,a,e;for(o=0,e=t.length;e>o;o++)if(a=t[o],a.checked)return a.value;return!1},t.prototype.prettifyText=function(t){return t.replace(/\_/gi," ")},t.prototype.getRadioButton=function(t){return'<li><input type="radio" id="type_radio_'+t+'" name="type_radio" value="'+t+'" /><label for="type_radio_'+t+'"><span></span>'+this.prettifyText(t)+"</label></li>"},t.prototype.setupRadioButtons=function(){var t,o,a,e,r;for(a="",r=this.rockin_chart.view.getSeriesNames(),t=0,e=r.length;e>t;t++)o=r[t],a+=this.getRadioButton(o);return document.getElementById("radio_buttons").innerHTML=a},t.prototype.isDateValid=function(t){var o;return null!=(o=t.match("\\d{4}-\\d{2}-\\d{2}"))?o:!1},t.prototype.isValidNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},t.prototype.onSubmit=function(t){var o,a,e;return t.preventDefault(),o=document.getElementById("date").value,e=Number(document.getElementById("point_value").value),a=this.getRadioValue(document.getElementsByName("type_radio")),this.isDateValid(o)&&this.isValidNumber(e)&&a?this.addPoint(o,a,Number(e)):alert("Please validate your data is correct!")},t.prototype.addPoint=function(t,o,a){return this.rockin_chart.view.addUpdatePoint(new Date(t).getTime(),o,a)},t.prototype.setup=function(){return this.form=document.getElementById("rockin_form"),this.form.addEventListener("submit",this.onSubmit.bind(this)),this.rockin_chart.display(),this.setupRadioButtons()},t}(),rockin_form=new RockinForm(json_data),rockin_form.setup();